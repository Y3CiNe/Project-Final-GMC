{"version":3,"sources":["actions/cart.js","../../../../node_modules/react-bootstrap/esm/ListGroupItem.js","../../../../node_modules/react-bootstrap/esm/ListGroup.js","views/Cart.js"],"names":["addToCart","id","qty","dispatch","getState","a","axios","get","data","type","ADD_CART_ITEM","payload","product","_id","name","image","price","countInStock","isPreOrder","localStorage","setItem","JSON","stringify","cart","cartItems","removeFromCart","REMOVE_CART_ITEM","saveShippingAddress","history","push","SAVE_CART_SHIPPING_ADDRESS","savePaymentMethod","SAVE_CART_PAYMENT_METHOD","defaultProps","variant","undefined","active","disabled","ListGroupItem","React","forwardRef","_ref","ref","bsPrefix","className","action","as","eventKey","onClick","props","_objectWithoutPropertiesLoose","useBootstrapPrefix","handleClick","useCallback","event","preventDefault","stopPropagation","createElement","AbstractNavItem","_extends","makeEventKey","href","classNames","displayName","horizontal","ListGroup","horizontalVariant","_useUncontrolled","useUncontrolled","activeKey","initialBsPrefix","_useUncontrolled$as","controlledProps","AbstractNav","Item","Cart","match","location","productId","params","search","split","useDispatch","useSelector","state","useEffect","title","md","length","to","map","item","key","src","alt","fluid","rounded","Control","value","onChange","e","target","Array","keys","index","reduce","acc","toFixed"],"mappings":"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","file":"static/js/Cart.743c613b.chunk.js","sourcesContent":["import axios from '../axios';\nimport history from '../history';\nimport {\n  ADD_CART_ITEM,\n  REMOVE_CART_ITEM,\n  SAVE_CART_SHIPPING_ADDRESS,\n  SAVE_CART_PAYMENT_METHOD,\n} from '../types/cart';\n\nexport const addToCart = (id, qty) => async (dispatch, getState) => {\n  const { data } = await axios.get(`/api/products/${id}`);\n\n  dispatch({\n    type: ADD_CART_ITEM,\n    payload: {\n      product: data._id,\n      name: data.name,\n      image: data.image,\n      price: data.price,\n      countInStock: data.countInStock,\n      isPreOrder: data.isPreOrder,\n      qty,\n    },\n  });\n\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\nexport const removeFromCart = (id) => (dispatch, getState) => {\n  dispatch({ type: REMOVE_CART_ITEM, payload: id });\n\n  localStorage.setItem('cartItems', JSON.stringify(getState().cart.cartItems));\n};\n\nexport const saveShippingAddress = (data) => {\n  localStorage.setItem('shippingAddress', JSON.stringify(data));\n  history.push('/payment');\n\n  return { type: SAVE_CART_SHIPPING_ADDRESS, payload: data };\n};\n\nexport const savePaymentMethod = (data) => {\n  localStorage.setItem('paymentMethod', JSON.stringify(data));\n\n  return { type: SAVE_CART_PAYMENT_METHOD, payload: data };\n};\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport AbstractNavItem from './AbstractNavItem';\nimport { makeEventKey } from './SelectableContext';\nimport { useBootstrapPrefix } from './ThemeProvider';\nvar defaultProps = {\n  variant: undefined,\n  active: false,\n  disabled: false\n};\nvar ListGroupItem = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      active = _ref.active,\n      disabled = _ref.disabled,\n      className = _ref.className,\n      variant = _ref.variant,\n      action = _ref.action,\n      as = _ref.as,\n      eventKey = _ref.eventKey,\n      onClick = _ref.onClick,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"active\", \"disabled\", \"className\", \"variant\", \"action\", \"as\", \"eventKey\", \"onClick\"]);\n\n  bsPrefix = useBootstrapPrefix(bsPrefix, 'list-group-item');\n  var handleClick = useCallback(function (event) {\n    if (disabled) {\n      event.preventDefault();\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) onClick(event);\n  }, [disabled, onClick]);\n  return /*#__PURE__*/React.createElement(AbstractNavItem, _extends({\n    ref: ref\n  }, props, {\n    eventKey: makeEventKey(eventKey || null, props.href) // eslint-disable-next-line no-nested-ternary\n    ,\n    as: as || (action ? props.href ? 'a' : 'button' : 'div'),\n    onClick: handleClick,\n    className: classNames(className, bsPrefix, active && 'active', disabled && 'disabled', variant && bsPrefix + \"-\" + variant, action && bsPrefix + \"-action\")\n  }));\n});\nListGroupItem.defaultProps = defaultProps;\nListGroupItem.displayName = 'ListGroupItem';\nexport default ListGroupItem;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport warning from 'warning';\nimport { useUncontrolled } from 'uncontrollable';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport AbstractNav from './AbstractNav';\nimport ListGroupItem from './ListGroupItem';\nvar defaultProps = {\n  variant: undefined,\n  horizontal: undefined\n};\nvar ListGroup = React.forwardRef(function (props, ref) {\n  var _useUncontrolled = useUncontrolled(props, {\n    activeKey: 'onSelect'\n  }),\n      className = _useUncontrolled.className,\n      initialBsPrefix = _useUncontrolled.bsPrefix,\n      variant = _useUncontrolled.variant,\n      horizontal = _useUncontrolled.horizontal,\n      _useUncontrolled$as = _useUncontrolled.as,\n      as = _useUncontrolled$as === void 0 ? 'div' : _useUncontrolled$as,\n      controlledProps = _objectWithoutPropertiesLoose(_useUncontrolled, [\"className\", \"bsPrefix\", \"variant\", \"horizontal\", \"as\"]);\n\n  var bsPrefix = useBootstrapPrefix(initialBsPrefix, 'list-group');\n  var horizontalVariant;\n\n  if (horizontal) {\n    horizontalVariant = horizontal === true ? 'horizontal' : \"horizontal-\" + horizontal;\n  } else {\n    horizontalVariant = null;\n  }\n\n  process.env.NODE_ENV !== \"production\" ? warning(!(horizontal && variant === 'flush'), '`variant=\"flush\"` and `horizontal` should not be used together.') : void 0;\n  return /*#__PURE__*/React.createElement(AbstractNav, _extends({\n    ref: ref\n  }, controlledProps, {\n    as: as,\n    className: classNames(className, bsPrefix, variant && bsPrefix + \"-\" + variant, horizontalVariant && bsPrefix + \"-\" + horizontalVariant)\n  }));\n});\nListGroup.defaultProps = defaultProps;\nListGroup.displayName = 'ListGroup';\nListGroup.Item = ListGroupItem;\nexport default ListGroup;","import React, { useEffect } from 'react';\nimport {\n  Col,\n  ListGroup,\n  Row,\n  Image,\n  Form,\n  Button,\n  Card,\n} from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Link } from 'react-router-dom';\n\nimport { addToCart, removeFromCart } from '../actions/cart';\nimport Message from '../components/Message';\nimport Meta from '../components/Meta';\n\nconst Cart = ({ match, location, history }) => {\n  const productId = match.params.id;\n  const qty = location.search ? +location.search.split('=')[1] : 1;\n  const dispatch = useDispatch();\n  const { cartItems } = useSelector((state) => state.cart);\n\n  useEffect(() => {\n    if (productId) {\n      dispatch(addToCart(productId, qty));\n    }\n  }, [dispatch, productId, qty]);\n\n  const removeFromCartClick = (id) => {\n    dispatch(removeFromCart(id));\n  };\n\n  const onCheckOutClick = () => {\n    history.push('/login?redirect=shipping');\n  };\n\n  return (\n    <>\n      <Meta title='Cart' />\n      <Row>\n        <Col md={8}>\n          <h1>Shopping Cart</h1>\n          {cartItems.length === 0 ? (\n            <Message>\n              Your cart is empty <Link to='/'>Go back</Link>\n            </Message>\n          ) : (\n            <ListGroup variant='flush'>\n              {cartItems.map((item) => {\n                return (\n                  <ListGroup.Item key={item.product}>\n                    <Row>\n                      <Col md={2}>\n                        <Image\n                          src={`/api/products/${item.product}/image`}\n                          alt={item.name}\n                          fluid\n                          rounded\n                        />\n                      </Col>\n                      <Col md={3}>\n                        <Link to={`/products/${item.product}`}>\n                          {item.name}\n                        </Link>\n                      </Col>\n                      <Col md={2}>${item.price}</Col>\n                      <Col md={2}>\n                        <Form.Control\n                          as='select'\n                          value={item.qty}\n                          disabled={item.isPreOrder}\n                          onChange={(e) =>\n                            dispatch(addToCart(item.product, +e.target.value))\n                          }>\n                          {[...Array(item.countInStock).keys()].map((index) => (\n                            <option key={index + 1} value={index + 1}>\n                              {index + 1}\n                            </option>\n                          ))}\n                        </Form.Control>\n                      </Col>\n                      <Col>\n                        <Button\n                          type='button'\n                          variant='ligth'\n                          onClick={() => removeFromCartClick(item.product)}>\n                          <i className='fas fa-trash'></i>\n                        </Button>\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n                );\n              })}\n            </ListGroup>\n          )}\n        </Col>\n        <Col md={4}>\n          <Card>\n            <ListGroup variant='flsuh'>\n              <ListGroup.Item>\n                <h2>\n                  Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}\n                  ) items\n                </h2>\n                $\n                {cartItems\n                  .reduce((acc, item) => acc + item.qty * item.price, 0)\n                  .toFixed(2)}\n              </ListGroup.Item>\n              <ListGroup.Item>\n                <Button\n                  type='button'\n                  className='btn-block'\n                  disabled={cartItems.length < 1}\n                  onClick={() => onCheckOutClick()}>\n                  Procced To Checkout\n                </Button>\n              </ListGroup.Item>\n            </ListGroup>\n          </Card>\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nexport default Cart;\n"],"sourceRoot":""}