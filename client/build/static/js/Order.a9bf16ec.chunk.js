(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[6],{162:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(176);t.a=function(e){var t=e.width,a=void 0===t?"100px":t,n=e.height,c=void 0===n?"100px":n;return r.a.createElement(o.a,{animation:"border",role:"status",style:{width:a,height:c},className:"d-block m-auto"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}},176:function(e,t,a){"use strict";var n=a(2),r=a(3),o=a(5),c=a.n(o),i=a(0),l=a.n(i),u=a(6),s=l.a.forwardRef((function(e,t){var a=e.bsPrefix,o=e.variant,i=e.animation,s=e.size,p=e.children,d=e.as,f=void 0===d?"div":d,m=e.className,y=Object(r.a)(e,["bsPrefix","variant","animation","size","children","as","className"]),v=(a=Object(u.a)(a,"spinner"))+"-"+i;return l.a.createElement(f,Object(n.a)({ref:t},y,{className:c()(m,v,s&&v+"-"+s,o&&"text-"+o)}),p)}));s.displayName="Spinner",t.a=s},218:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return p})),a.d(t,"c",(function(){return d}));var n=a(8),r=a.n(n),o=a(22),c=a(15),i=a(26),l=a(41),u=a(18),s=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n){var o,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:u.f}),a.prev=1,a.next=4,c.a.get("/api/orders/".concat(e),{cancelToken:t});case 4:o=a.sent,i=o.data,n({type:u.g,payload:i}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),c.a.isCancel(a.t0)?n({type:u.d}):n({type:u.e,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.response});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n,o;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:u.b}),t.prev=1,t.next=4,c.a.post("/api/orders",e);case 4:n=t.sent,o=n.data,a({type:u.c}),a({type:l.c}),localStorage.removeItem("cartItems"),i.a.push("/orders/".concat(o._id)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a({type:u.a,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.response});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()},d=function(e,t){return function(){var a=Object(o.a)(r.a.mark((function a(n){var o,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n({type:u.m}),a.prev=1,a.next=4,c.a.put("/api/orders/".concat(e,"/pay"),t);case 4:o=a.sent,i=o.data,n({type:u.n,payload:i}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),n({type:u.l,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.response});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()}},219:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(48),c=a(227),i=a(114),l=a(71);t.a=function(e){var t=e.order,a=e.children;return r.a.createElement(o.a,null,r.a.createElement(c.a,{variant:"flush"},r.a.createElement(c.a.Item,null,r.a.createElement("h2",null,"Order Summary")),r.a.createElement(c.a.Item,null,r.a.createElement(i.a,null,r.a.createElement(l.a,null,"Items"),r.a.createElement(l.a,null,"$",t.itemsPrice))),r.a.createElement(c.a.Item,null,r.a.createElement(i.a,null,r.a.createElement(l.a,null,"Shipping"),r.a.createElement(l.a,null,"$",t.shippingPrice))),r.a.createElement(c.a.Item,null,r.a.createElement(i.a,null,r.a.createElement(l.a,null,"Total"),r.a.createElement(l.a,null,"$",t.totalPrice))),a?r.a.createElement(c.a.Item,null,a):null))}},220:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(227),c=a(26),i=a(58);t.a=function(e){var t=e.order,a=c.a.location.pathname.split("/")[1];return r.a.createElement(o.a.Item,null,r.a.createElement("h2",null,"Shipping"),r.a.createElement("p",null,r.a.createElement("strong",null,"Address: "),t.shippingAddress.address,", ",t.shippingAddress.city,",",t.shippingAddress.postalCode,",",t.shippingAddress.country),"orders"===a?t.isDelivered?r.a.createElement(i.a,{variant:"success"},"Delivered at ",t.deliveredAt.split("T")[0]):r.a.createElement(i.a,{variant:"danger"},"Not delivered"):null)}},221:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(227),c=a(26),i=a(58);t.a=function(e){var t=e.order,a=c.a.location.pathname.split("/")[1];return r.a.createElement(o.a.Item,null,r.a.createElement("h2",null,"Payment Method"),r.a.createElement("p",null,r.a.createElement("strong",null,"Method: "),JSON.parse(localStorage.getItem("paymentMethod"))),"orders"===a?t.isPaid?r.a.createElement(i.a,{variant:"success"},"Paid on ",t.paidAt.split("T")[0]):r.a.createElement(i.a,{variant:"danger"},"Not paid"):null)}},222:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(227),c=a(114),i=a(71),l=a(157),u=a(11),s=a(26),p=a(58);t.a=function(e){var t=e.order,a="placeorder"===s.a.location.pathname.split("/")[1]?"cartItems":"orderItems";return r.a.createElement(o.a.Item,null,r.a.createElement("h2",null,"Order Items"),0===t[a].length?r.a.createElement(p.a,null,"Your cart is empty"):r.a.createElement(o.a,{variant:"flush"},t[a].map((function(e,t){return r.a.createElement(o.a.Item,{key:t},r.a.createElement(c.a,null,r.a.createElement(i.a,{md:2},r.a.createElement(l.a,{src:"/api/products/".concat(e.product,"/image"),alt:e.name,fluid:!0,rounded:!0})),r.a.createElement(i.a,null,r.a.createElement(u.Link,{to:"/products/".concat(e.product)},e.name)),r.a.createElement(i.a,{md:4},e.qty," x $",e.price," = $",e.qty*e.price)))}))))}},227:function(e,t,a){"use strict";var n=a(2),r=a(3),o=a(5),c=a.n(o),i=a(0),l=a.n(i),u=(a(49),a(27)),s=a(6),p=a(84),d=a(83),f=a(19),m={variant:void 0,active:!1,disabled:!1},y=l.a.forwardRef((function(e,t){var a=e.bsPrefix,o=e.active,u=e.disabled,p=e.className,m=e.variant,y=e.action,v=e.as,h=e.eventKey,b=e.onClick,E=Object(r.a)(e,["bsPrefix","active","disabled","className","variant","action","as","eventKey","onClick"]);a=Object(s.a)(a,"list-group-item");var g=Object(i.useCallback)((function(e){if(u)return e.preventDefault(),void e.stopPropagation();b&&b(e)}),[u,b]);return l.a.createElement(d.a,Object(n.a)({ref:t},E,{eventKey:Object(f.b)(h||null,E.href),as:v||(y?E.href?"a":"button":"div"),onClick:g,className:c()(p,a,o&&"active",u&&"disabled",m&&a+"-"+m,y&&a+"-action")}))}));y.defaultProps=m,y.displayName="ListGroupItem";var v=y,h={variant:void 0,horizontal:void 0},b=l.a.forwardRef((function(e,t){var a,o=Object(u.a)(e,{activeKey:"onSelect"}),i=o.className,d=o.bsPrefix,f=o.variant,m=o.horizontal,y=o.as,v=void 0===y?"div":y,h=Object(r.a)(o,["className","bsPrefix","variant","horizontal","as"]),b=Object(s.a)(d,"list-group");return a=m?!0===m?"horizontal":"horizontal-"+m:null,l.a.createElement(p.a,Object(n.a)({ref:t},h,{as:v,className:c()(i,b,f&&b+"-"+f,a&&b+"-"+a)}))}));b.defaultProps=h,b.displayName="ListGroup",b.Item=v;t.a=b},263:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalButton=void 0;var n=c(a(0)),r=c(a(31)),o=c(a(4));function c(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=s(this,p(t).call(this,e))).state={isSdkReady:!1},a}var a,o,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),a=t,(o=[{key:"componentDidMount",value:function(){"undefined"!==typeof window&&void 0!==window&&void 0===window.paypal?this.addPaypalSdk():"undefined"!==typeof window&&void 0!==window&&void 0!==window.paypal&&this.props.onButtonReady&&this.props.onButtonReady()}},{key:"createOrder",value:function(e,t){var a=this.props,n=a.currency,r=a.options,o=a.amount,c=a.shippingPreference;return t.order.create({purchase_units:[{amount:{currency_code:n||(r&&r.currency?r.currency:"USD"),value:o.toString()}}],application_context:{shipping_preference:c}})}},{key:"onApprove",value:function(e,t){var a=this;return t.order.capture().then((function(t){if(a.props.onSuccess)return a.props.onSuccess(t,e)})).catch((function(e){if(a.props.catchError)return a.props.catchError(e)}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.amount,o=t.onSuccess,c=t.createOrder,i=t.createSubscription,u=t.onApprove,s=t.style;if(!this.state.isSdkReady&&("undefined"===typeof window||void 0===window.paypal))return null;var p=window.paypal.Buttons.driver("react",{React:n.default,ReactDOM:r.default}),d=a&&!c?function(t,a){return e.createOrder(t,a)}:function(e,t){return c(e,t)};return n.default.createElement(p,l({},this.props,{createOrder:i?void 0:d,createSubscription:i,onApprove:o?function(t,a){return e.onApprove(t,a)}:function(e,t){return u(e,t)},style:s}))}},{key:"addPaypalSdk",value:function(){var e=this,t=this.props,a=t.options,n=t.onButtonReady,r=[];Object.keys(a).forEach((function(e){var t=e.split(/(?=[A-Z])/).join("-").toLowerCase();r.push("".concat(t,"=").concat(a[e]))}));var o=document.createElement("script");o.type="text/javascript",o.src="https://www.paypal.com/sdk/js?".concat(r.join("&")),o.async=!0,o.onload=function(){e.setState({isSdkReady:!0}),n&&n()},o.onerror=function(){throw new Error("Paypal SDK could not be loaded.")},document.body.appendChild(o)}}])&&u(a.prototype,o),c&&u(a,c),t}(n.default.Component);t.PayPalButton=m,f(m,"propTypes",{amount:o.default.oneOfType([o.default.number,o.default.string]),currency:o.default.oneOfType([o.default.number,o.default.string]),shippingPreference:o.default.string,onSuccess:o.default.func,catchError:o.default.func,onError:o.default.func,createOrder:o.default.func,createSubscription:o.default.func,onApprove:o.default.func,style:o.default.object,options:o.default.shape({clientId:o.default.string,merchantId:o.default.string,currency:o.default.oneOfType([o.default.number,o.default.string]),intent:o.default.string,commit:o.default.oneOfType([o.default.bool,o.default.string]),vault:o.default.oneOfType([o.default.bool,o.default.string]),component:o.default.string,disableFunding:o.default.string,disableCard:o.default.string,integrationDate:o.default.string,locale:o.default.string,buyerCountry:o.default.string,debug:o.default.oneOfType([o.default.bool,o.default.string])}),onButtonReady:o.default.func}),f(m,"defaultProps",{style:{},options:{clientId:"sb",currency:"USD"},shippingPreference:"GET_FROM_FILE"})},272:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a.n(n),o=a(22),c=a(80),i=a(0),l=a.n(i),u=a(102),s=a(114),p=a(71),d=a(227),f=a(17),m=a(263),y=a(63),v=a.n(y),h=a(218),b=a(162),E=a(58),g=a(219),O=a(220),w=a(221),j=a(222),P=a(81);t.default=function(e){var t=e.match,a=Object(f.b)(),n=Object(f.c)((function(e){return e.order})),y=n.loading,k=n.paying,S=n.data,x=n.error,I=Object(i.useState)(!1),_=Object(c.a)(I,2),N=_[0],C=_[1],T=t.params.id;Object(i.useEffect)((function(){var e=v.a.CancelToken.source(),t=function(){var e=Object(o.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/config/paypal");case 2:t=e.sent,a=t.data,(n=document.createElement("script")).type="text/javascript",n.async=!0,n.src="https://www.paypal.com/sdk/js?client-id=".concat(a),n.onload=function(){C(!0)},document.body.appendChild(n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return S&&T===S._id?S.isPaid||(window.paypal?C(!0):t()):a(Object(h.b)(T,e.token)),function(){e.cancel()}}),[S,a,T]);return y||k?l.a.createElement(b.a,null):l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{title:"Order"}),x&&l.a.createElement(E.a,{variant:"danger"},x),l.a.createElement("h1",null,"Order ",S._id),l.a.createElement(s.a,null,l.a.createElement(p.a,{md:8},l.a.createElement(d.a,{variant:"flush"},l.a.createElement(O.a,{order:S}),l.a.createElement(w.a,{order:S}),l.a.createElement(j.a,{order:S}))),l.a.createElement(p.a,{md:4},l.a.createElement(g.a,{order:S,error:x},function(){if(S.isPaid)return null;switch(S.paymentMethod){case"Free":return l.a.createElement(u.a,{className:"d-block w-100",onClick:function(){return a(Object(h.c)(T,{email_address:S.user.email}))}},"Free!");case"Paypal":return N?l.a.createElement(m.PayPalButton,{amount:S.totalPrice,onSuccess:function(e){return a(Object(h.c)(T,e))}}):l.a.createElement(b.a,null);default:return null}}()))))}}}]);
//# sourceMappingURL=Order.a9bf16ec.chunk.js.map