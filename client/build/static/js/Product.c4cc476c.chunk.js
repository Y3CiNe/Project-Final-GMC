(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[10],{162:function(e,t,a){"use strict";var r=a(0),n=a.n(r),c=a(176);t.a=function(e){var t=e.width,a=void 0===t?"100px":t,r=e.height,i=void 0===r?"100px":r;return n.a.createElement(c.a,{animation:"border",role:"status",style:{width:a,height:i},className:"d-block m-auto"},n.a.createElement("span",{className:"sr-only"},"Loading..."))}},167:function(e,t,a){"use strict";var r=a(80),n=a(0),c=a.n(n),i=a(165),l=a(159),u=a(101),s=function(e){return c.a.createElement(l.a.Control,e)},o=function(e){return c.a.createElement(l.a.Control,Object.assign({as:"textarea",row:"5"},e))},d=function(e){return c.a.createElement(l.a.Control,Object.assign({as:"select"},e),e.options.map((function(e){return c.a.createElement("option",{key:e.title,value:e.value},e.title)})))},m=function(e){return c.a.createElement(l.a.Control,Object.assign({type:"date"},e))},p=function(e){return c.a.createElement(l.a.Check,e)},f=function(e){return c.a.createElement(l.a.Check,e)};t.a=function(e){var t=e.name,a=e.type,n=e.label,E=e.disabled,b=e.options,v=e.value,h=Object(i.e)(t),g=Object(r.a)(h,2)[1],y=function(e){switch(e){case"select":return d;case"textarea":return o;case"date":return m;case"checkbox":return p;case"radio":return f;default:return s}};return c.a.createElement(l.a.Group,{controlId:n},"checkbox"===a||"radio"===a?c.a.createElement(i.b,{name:t,type:a,label:n,value:v,as:y(a)}):c.a.createElement(c.a.Fragment,null,c.a.createElement(l.a.Label,null,n),c.a.createElement(i.b,{name:t,type:a,placeholder:"Enter ".concat(n),isInvalid:g.touched&&g.error,disabled:E,options:b,as:y(a)}),c.a.createElement(i.a,{name:t,render:function(e){return c.a.createElement(u.a.Feedback,{type:"invalid"},e)}})))}},169:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"g",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return l})),a.d(t,"h",(function(){return u})),a.d(t,"d",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return d}));var r=a(185),n=r.b({email:r.c().email("Invalid email format").required("Email is required"),password:r.c().required("Password is required").min(6,"Required at least 6 characters")}),c=r.b({name:r.c().required("Name is required"),email:r.c().email("Invalid email format").required("Email is required"),password:r.c().required("Password is required").min(6,"Required at least 6 characters"),confirmPassword:r.c().required("Confirm password is required").min(6,"Required at least 6 characters")}),i=r.b({name:r.c().required("Name is required"),password:r.c().min(6,"Required at least 6 characters"),confirmPassword:r.c().min(6,"Required at least 6 characters")}),l=r.b({redirectUrl:r.c().required("Redirect url is required")}),u=r.b({name:r.c().required("Name is required"),email:r.c().required("Email is required").email("Invalid email format")}),s=r.b({name:r.c().required("Name is required"),price:r.a().typeError("Must be a number").required("Price is required"),brand:r.c().required("Brand is required"),category:r.c().required("Category is required"),countInStock:r.a().typeError("Must be a number").required("CountInStock is required"),description:r.c().required("Description is required")}),o=r.b({rating:r.c().required("Rating is required")}),d=r.b({address:r.c().required("Address is required"),city:r.c().required("City is required"),postalCode:r.a(),country:r.c().required("Country is required")})},204:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return o}));var r=a(8),n=a.n(r),c=a(22),i=a(15),l=a(26),u=a(20),s=function(e,t){return function(){var a=Object(c.a)(n.a.mark((function a(r){var c,l;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:u.i}),a.prev=1,a.next=4,i.a.get("/api/products/".concat(e),{cancelToken:t});case 4:c=a.sent,l=c.data,r({type:u.j,payload:l}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),i.a.isCancel(a.t0)?r({type:u.g}):r({type:u.h,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()},o=function(e,t){return function(){var a=Object(c.a)(n.a.mark((function a(r){var c,s,o,d,m,p,f,E,b,v,h,g;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:u.m}),a.prev=1,c=t.name,s=t.price,o=t.description,d=t.brand,m=t.category,p=t.countInStock,f=t.releaseDate,E=t.image,b=t.isPreOrder,(v=new FormData).append("name",c),v.append("price",s),v.append("description",o),v.append("brand",d),v.append("category",m),v.append("countInStock",p),v.append("releaseDate",f),v.append("isPreOrder",b),E&&v.append("productImg",E),a.next=15,i.a.put("/api/products/".concat(e),v);case 15:h=a.sent,g=h.data,l.a.push("/admin/productList"),r({type:u.n,payload:g}),a.next=24;break;case 21:a.prev=21,a.t0=a.catch(1),r({type:u.k,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.response});case 24:case"end":return a.stop()}}),a,null,[[1,21]])})));return function(e){return a.apply(this,arguments)}}()}},279:function(e,t,a){"use strict";a.r(t);var r=a(80),n=a(0),c=a.n(n),i=a(17),l=a(114),u=a(102),s=a(71),o=a(157),d=a(47),m=a.n(d),p=a(26),f=a(204),E=a(8),b=a.n(E),v=a(22),h=a(15),g=a(37),y=a(20),w=function(e,t){return function(){var a=Object(v.a)(b.a.mark((function a(r){var n,c;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r({type:g.e}),a.prev=1,a.next=4,h.a.get("/api/reviews/".concat(e,"?page=").concat(t));case 4:n=a.sent,c=n.data,r({type:g.f,payload:c}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(1),r({type:g.d,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.response});case 12:case"end":return a.stop()}}),a,null,[[1,9]])})));return function(e){return a.apply(this,arguments)}}()},k=a(162),q=a(58),O=a(81),j=a(227),I=a(11),x=a(165),C=a(169),R=a(167),S={rating:1,comment:""},P=[{title:"1 - Poor",value:1},{title:"2 - Fair",value:2},{title:"3 - Good",value:3},{title:"4 - Very Good",value:4},{title:"5 - Excellent",value:5}],N=function(e){var t=e.redirect,a=Object(i.c)((function(e){return e.auth})).data,r=Object(i.c)((function(e){return e.product})).data,l=Object(i.c)((function(e){return e.reviews})).success,s=Object(n.useRef)(),o=Object(i.b)();return Object(n.useEffect)((function(){l&&s.current.resetForm()}),[l]),c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Write a Customer Review"),a?c.a.createElement(j.a,{variant:"flush"},c.a.createElement(j.a.Item,null,c.a.createElement(x.d,{innerRef:s,initialValues:S,validationSchema:C.f,onSubmit:function(e){var t,a;o((t=r._id,a=e,function(){var e=Object(v.a)(b.a.mark((function e(r){var n,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r({type:g.b}),e.prev=1,e.next=4,h.a.post("/api/reviews/".concat(t),a);case 4:n=e.sent,c=n.data,r({type:g.c,payload:c}),r({type:y.l,payload:c.review.rating}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),r({type:g.a,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.response});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()))}},(function(e){var t=e.isSubmitting;return c.a.createElement(x.c,null,c.a.createElement(R.a,{label:"Rating",name:"rating",type:"select",options:P}),c.a.createElement(R.a,{label:"Comment",name:"comment",type:"textarea"}),c.a.createElement(u.a,{className:"d-block ml-auto",type:"submit",varaint:"primary",disabled:t},"Submit"))})))):c.a.createElement(q.a,{variant:"primary"},"Please ",c.a.createElement(I.Link,{to:"/login?redirect=".concat(t)},"sign in")," to write a review"))},F=a(85),A=function(e){var t=e.product;return c.a.createElement(j.a,{variant:"flush"},c.a.createElement(j.a.Item,null,c.a.createElement("h3",null,t.name)),c.a.createElement(j.a.Item,null,c.a.createElement(F.a,{value:t.rating,text:"".concat(t.numReviews," reviews")})),c.a.createElement(j.a.Item,null,"Price:",t.price),c.a.createElement(j.a.Item,null,"Description:",t.description))},L=a(21),_=a(48),T=a(159),D=a(50),G=function(e){var t=e.product,a=Object(i.b)(),o=Object(n.useState)(1),d=Object(r.a)(o,2),m=d[0],f=d[1],E=Object(i.c)((function(e){return e.auth})).data,b=E&&E.wishList.find((function(e){return e._id===t._id}))?"Remove From Wishlist":"Add To Wishlist";return c.a.createElement(_.a,null,c.a.createElement(j.a,{varient:"flush"},c.a.createElement(j.a.Item,null,c.a.createElement(l.a,null,c.a.createElement(s.a,null,"Price:"),c.a.createElement(s.a,null,c.a.createElement("strong",null,"$",t.price)))),c.a.createElement(j.a.Item,null,c.a.createElement(l.a,null,c.a.createElement(s.a,null,"Status:"),c.a.createElement(s.a,null,t.countInStock>0?"In Stock":"Out of Stock"))),t.countInStock>0&&c.a.createElement(j.a.Item,null,c.a.createElement(l.a,null,c.a.createElement(s.a,null,"Qty"),c.a.createElement(s.a,null,c.a.createElement(T.a.Control,{as:"select",value:m,disabled:t.isPreOrder,onChange:function(e){return f(e.target.value)}},Object(L.a)(Array(t.countInStock).keys()).map((function(e){return c.a.createElement("option",{key:e+1,value:e+1},e+1)}))))),t.isPreOrder&&c.a.createElement("p",null,"*Limit one item per person")),c.a.createElement(j.a.Item,null,c.a.createElement(u.a,{className:"btn-block",type:"button",disabled:t.countInStock<1,onClick:function(){p.a.push("/cart/".concat(t._id,"?qty=").concat(m))}},t.isPreOrder?"Pre-Order":"Add To Cart"),c.a.createElement(u.a,{className:"btn-block",type:"button",onClick:function(){E?a(Object(D.f)(t._id)):p.a.push("/login?redirect=products/".concat(t._id))}},b))))},H=a(264),W=function(e){var t=e.review,a=e.style,r=e.lastReviewEleRef;return r?c.a.createElement(j.a.Item,{ref:r,style:a},c.a.createElement("strong",null,t.name),c.a.createElement(F.a,{value:t.rating}),c.a.createElement("p",null,t.createdAt.substring(0,10)),c.a.createElement("p",{style:{wordBreak:"break-all",whiteSpace:"normal"}},t.comment)):c.a.createElement(j.a.Item,{style:a},c.a.createElement("strong",null,t.name),c.a.createElement(F.a,{value:t.rating}),c.a.createElement("p",null,t.createdAt.substring(0,10)),c.a.createElement("p",{style:{wordBreak:"break-all",whiteSpace:"normal"}},t.comment))},B=function(e){var t=e.productId,a=Object(i.c)((function(e){return e.reviews})),r=a.loading,l=a.data,u=a.hasMore,s=a.creating,o=a.success,d=a.error,m=Object(i.b)(),p=Object(n.useRef)(),f=Object(n.useRef)(1),E=Object(n.useRef)(),b=Object(n.useRef)(new H.c({fixedWidth:!0,defaultHeight:50})),v=Object(n.useCallback)((function(e){r||(p.current&&p.current.disconnect(),p.current=new IntersectionObserver((function(e){e[0].isIntersecting&&u&&setTimeout((function(){f.current+=1,m(w(t,f.current))}),2e3)})),e&&p.current.observe(e))}),[m,r,u,t]),h=function(e){var t=e.key,a=e.index,r=e.style,n=e.parent,i=l.reviews[a];return a+1===l.reviews.length?c.a.createElement(H.b,{key:t,cache:b.current,parent:n,columnIndex:0,rowIndex:a},c.a.createElement(W,{review:i,style:r,lastReviewEleRef:v})):c.a.createElement(H.b,{key:t,cache:b.current,parent:n,columnIndex:0,rowIndex:a},c.a.createElement(W,{review:i,style:r}))};return Object(n.useEffect)((function(){o&&(b.current.clearAll(),E.current.forceUpdateGrid(),m({type:g.g}))}),[o]),c.a.createElement(c.a.Fragment,null,l.page&&c.a.createElement("h2",null,"Reviews"),!r&&!d&&l.reviews&&0===l.reviews.length&&c.a.createElement(q.a,{variant:"primary"},"No Reviews"),d&&c.a.createElement(q.a,{variant:"danger"},d),s?c.a.createElement(k.a,{width:"30px",height:"30px"}):null,c.a.createElement(H.e,null,(function(e){var t=e.height,a=e.isScrolling,r=e.onChildScroll,n=e.scrollTop;return c.a.createElement(H.a,{disableHeight:!0},(function(e){var i=e.width;return c.a.createElement(j.a,null,c.a.createElement(H.d,{ref:E,autoHeight:!0,height:t,isScrolling:a,onScroll:r,rowCount:l.reviews.length,rowHeight:b.current.rowHeight,deferredMeasurementCache:b.current,rowRenderer:h,scrollTop:n,width:i}))}))})),c.a.createElement("div",null,r&&c.a.createElement(k.a,{width:"30px",height:"30px"})))};t.default=function(e){var t=e.match,a=Object(i.c)((function(e){return e.product})),d=a.loading,E=a.data,b=a.error,v=Object(n.useState)(!1),h=Object(r.a)(v,2),g=h[0],y=h[1],j=Object(i.b)(),I=t.params.id;return Object(n.useEffect)((function(){j(Object(f.a)(I)),j(w(I,1))}),[j,I]),c.a.createElement(c.a.Fragment,null,d?c.a.createElement(k.a,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(O.a,{title:E.name,description:"We sell the best products for cheap",keywords:"electronics"}),b&&c.a.createElement(q.a,{variant:"danger"},b),c.a.createElement(l.a,{className:"m-auto"},c.a.createElement(u.a,{className:"mr-auto my-3",variant:"secondary",onClick:function(){return p.a.goBack()}},"Go back")),c.a.createElement(l.a,null,c.a.createElement(s.a,{md:4,className:"d-flex align-items-center"},!g&&c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(m.a,{height:300,width:"100%"})),c.a.createElement(o.a,{className:"m-auto",src:"/api/products/".concat(E._id,"/image"),style:{objectFit:"contain",height:"300px"},fluid:!0,alt:E.name,onLoad:function(){return y(!0)}})),c.a.createElement(s.a,{md:5},c.a.createElement(A,{product:E})),c.a.createElement(s.a,{md:3},c.a.createElement(G,{product:E}))),c.a.createElement(l.a,null,c.a.createElement(s.a,null,c.a.createElement(N,{redirect:t.url}),c.a.createElement(B,{productId:I})))))}}}]);
//# sourceMappingURL=Product.c4cc476c.chunk.js.map